{"version":3,"sources":["../src/crc.js"],"names":["numToHex","n","digits","hex","toString","toUpperCase","repeat","slice","length","CRC","str","invert","bytes","TextEncoder","encode","crcTable","crc","i","c","j","answer","module","exports"],"mappings":"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","sourcesContent":["/* eslint-disable eqeqeq */\n/* eslint-disable no-bitwise */\n/* eslint-disable no-plusplus */\n/* eslint-disable max-len */\n// https://github.com/NascentSecureTech/pix-qrcode-utils/blob/01a072f458d63dea2376e631284085405fd8b027/packages/data-schemas/src/data-utils.ts#L9\nfunction numToHex(n, digits = 4) {\n  const hex = n.toString(16).toUpperCase();\n\n  if (digits) {\n    return ('0'.repeat(digits) + hex).slice(-digits);\n  }\n\n  return (hex.length % 2 == 0) ? hex : `0${hex}`;\n}\n\nfunction CRC(str, invert = false) {\n  const bytes = new TextEncoder().encode(str);\n\n  const crcTable = [0x0000, 0x1021, 0x2042, 0x3063, 0x4084, 0x50a5, 0x60c6, 0x70e7, 0x8108, 0x9129, 0xa14a, 0xb16b, 0xc18c, 0xd1ad, 0xe1ce, 0xf1ef, 0x1231, 0x0210, 0x3273, 0x2252, 0x52b5, 0x4294, 0x72f7, 0x62d6, 0x9339, 0x8318, 0xb37b, 0xa35a, 0xd3bd, 0xc39c, 0xf3ff, 0xe3de, 0x2462, 0x3443, 0x0420, 0x1401, 0x64e6, 0x74c7, 0x44a4, 0x5485, 0xa56a, 0xb54b, 0x8528, 0x9509, 0xe5ee, 0xf5cf, 0xc5ac, 0xd58d, 0x3653, 0x2672, 0x1611, 0x0630, 0x76d7, 0x66f6, 0x5695, 0x46b4, 0xb75b, 0xa77a, 0x9719, 0x8738, 0xf7df, 0xe7fe, 0xd79d, 0xc7bc, 0x48c4, 0x58e5, 0x6886, 0x78a7, 0x0840, 0x1861, 0x2802, 0x3823, 0xc9cc, 0xd9ed, 0xe98e, 0xf9af, 0x8948, 0x9969, 0xa90a, 0xb92b, 0x5af5, 0x4ad4, 0x7ab7, 0x6a96, 0x1a71, 0x0a50, 0x3a33, 0x2a12, 0xdbfd, 0xcbdc, 0xfbbf, 0xeb9e, 0x9b79, 0x8b58, 0xbb3b, 0xab1a, 0x6ca6, 0x7c87, 0x4ce4, 0x5cc5, 0x2c22, 0x3c03, 0x0c60, 0x1c41, 0xedae, 0xfd8f, 0xcdec, 0xddcd, 0xad2a, 0xbd0b, 0x8d68, 0x9d49, 0x7e97, 0x6eb6, 0x5ed5, 0x4ef4, 0x3e13, 0x2e32, 0x1e51, 0x0e70, 0xff9f, 0xefbe, 0xdfdd, 0xcffc, 0xbf1b, 0xaf3a, 0x9f59, 0x8f78, 0x9188, 0x81a9, 0xb1ca, 0xa1eb, 0xd10c, 0xc12d, 0xf14e, 0xe16f, 0x1080, 0x00a1, 0x30c2, 0x20e3, 0x5004, 0x4025, 0x7046, 0x6067, 0x83b9, 0x9398, 0xa3fb, 0xb3da, 0xc33d, 0xd31c, 0xe37f, 0xf35e, 0x02b1, 0x1290, 0x22f3, 0x32d2, 0x4235, 0x5214, 0x6277, 0x7256, 0xb5ea, 0xa5cb, 0x95a8, 0x8589, 0xf56e, 0xe54f, 0xd52c, 0xc50d, 0x34e2, 0x24c3, 0x14a0, 0x0481, 0x7466, 0x6447, 0x5424, 0x4405, 0xa7db, 0xb7fa, 0x8799, 0x97b8, 0xe75f, 0xf77e, 0xc71d, 0xd73c, 0x26d3, 0x36f2, 0x0691, 0x16b0, 0x6657, 0x7676, 0x4615, 0x5634, 0xd94c, 0xc96d, 0xf90e, 0xe92f, 0x99c8, 0x89e9, 0xb98a, 0xa9ab, 0x5844, 0x4865, 0x7806, 0x6827, 0x18c0, 0x08e1, 0x3882, 0x28a3, 0xcb7d, 0xdb5c, 0xeb3f, 0xfb1e, 0x8bf9, 0x9bd8, 0xabbb, 0xbb9a, 0x4a75, 0x5a54, 0x6a37, 0x7a16, 0x0af1, 0x1ad0, 0x2ab3, 0x3a92, 0xfd2e, 0xed0f, 0xdd6c, 0xcd4d, 0xbdaa, 0xad8b, 0x9de8, 0x8dc9, 0x7c26, 0x6c07, 0x5c64, 0x4c45, 0x3ca2, 0x2c83, 0x1ce0, 0x0cc1, 0xef1f, 0xff3e, 0xcf5d, 0xdf7c, 0xaf9b, 0xbfba, 0x8fd9, 0x9ff8, 0x6e17, 0x7e36, 0x4e55, 0x5e74, 0x2e93, 0x3eb2, 0x0ed1, 0x1ef0];\n\n  let crc = 0xFFFF;\n\n  for (let i = 0; i < bytes.length; i++) {\n    const c = bytes[i];\n    const j = (c ^ (crc >> 8)) & 0xFF;\n\n    crc = crcTable[j] ^ (crc << 8);\n  }\n\n  const answer = ((crc ^ 0) & 0xFFFF);\n\n  const hex = numToHex(answer, 4);\n\n  if (invert) return hex.slice(2) + hex.slice(0, 2);\n\n  return hex;\n}\n\nmodule.exports = { CRC };\n"],"file":"crc.js"}